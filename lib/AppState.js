/*
 * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/EventProvider","sap/ui/generic/app/library","jquery.sap.global"],function(P,g,$){"use strict";var a=[];var c=-1;var E={STORE_SECONDPARAM:"Second parameter is optional but it has to be a function if set"};var N=g.navigation.service.NavType;var b="stateReceived";var d="parametersReceived";var A=P.extend("fin.ap.process.payments.lib.AppState",{constructor:function(n){var e=a[++c]={selectionVariant:{},tableVariantId:null,customData:{},instanceId:c};this.appStateData=function(){return e;};P.call(this);this.navigationHandler=n;$.sap.delayedCall(0,this,function(){this.parseNavigation();});}});A.prototype.parseNavigation=function(){this.navigationHandler.parseNavigation().done(this.handlerNavigationParsed.bind(this));};A.prototype.attachStateReceived=function(e,f){this.attachEvent(b,e,f);};A.prototype.attachParametersReceived=function(e,f){this.attachEvent(d,e,f);};A.prototype.handlerNavigationParsed=function(e,s,n){e=this.normalizeAppData(e,n);if(n===N.iAppState){this.fireEvent(b,{applicationState:this,applicationData:e});}else if(n===N.URLParams||N.xAppState){this.fireEvent(d,{applicationState:this,applicationData:e,startupParameters:s});}};A.prototype.normalizeAppData=function(e,n){if(n!==N.initial&&e!==null&&typeof e==="object"){e.customData=e.customData||{};this.appStateData().customData=e.customData;}return e;};A.prototype.store=function(e,f){var o=this.navigationHandler.storeInnerAppState(JSON.parse(JSON.stringify(e)));if(f){if(typeof f!=="function"){throw E.STORE_SECONDPARAM;}else{o.done(f);}}return o;};A.prototype.getNavigationHandler=function(){return this.navigationHandler;};A.prototype.setSmartFilterBarSettings=function(s,v,e){var i;v=v||[];for(i=0;i<v.length;i++){if(!s.getValue(v[i])){s.addSelectOption(v[i],"I","EQ","");}}this.appStateData().selectionVariant=s.toJSONString();return this.store(this.appStateData(),e);};A.prototype.getCustomData=function(k){return this.appStateData().customData[k];};A.prototype.setCustomData=function(k,v,e){this.appStateData().customData[k]=v;return this.store(this.appStateData(),e);};return A;});
