/*
 * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object","fin/ap/process/payments/lib/Constants","sap/ushell/services/UserInfo","sap/ui/core/routing/HashChanger","sap/ushell/services/URLParsing","jquery.sap.global","jquery.sap.promise"],function(P,C,U,H,a,$){"use strict";var A=P.extend("fin.ap.process.payments.lib.AppMode",{constructor:function(b,c){var u=new U();this.btnModel=b;this.component=c;this.appMode="";this.user=u.getId();}});A.prototype.initAppMode=function(){var b=[];var c=[];this.appMode=this.getAppModeFromShell();b=this.getAllButtons();this.toggleButtons(b,false);c=this.getActivitiesByAppMode(this.getAppMode());this.initActivities(c);};A.prototype.initActivities=function(b){var c=[];b.forEach(function(i){c=c.concat(this.getButtonsByActivity(i));}.bind(this));this.toggleButtons(c,true);};A.prototype.toggleButtons=function(b,e){var c=this.getBtnModel();b.forEach(function(i){c.setProperty("/"+i,e);});};A.prototype.getButtonsByActivity=function(b){var s=C.ACTIVITIES.filter(function(i){return i.activity===b;});return s[0].buttons;};A.prototype.getAppModeFromShell=function(){var h=new H();var u=new a();var p=u.parseShellHash(h.getHash());return(p.action==="process")?"process":"request";};A.prototype.getActivitiesByAppMode=function(b){var s=C.APP_MODES.filter(function(i){return b===i.appMode;});return s&&s[0]?s[0].activity:[];};A.prototype.getAllButtons=function(){var b=[];var u=[];C.ACTIVITIES.forEach(function(i){b=b.concat(this.getButtonsByActivity(i.activity));}.bind(this));u=b.filter(function(i,p){return b.indexOf(i)===p;});return u;};A.prototype.getUser=function(){return this.user;};A.prototype.getAppMode=function(){return this.appMode;};A.prototype.getBtnModel=function(){return this.btnModel;};A.prototype.getOwnerComponent=function(){return this.component;};return A;});
